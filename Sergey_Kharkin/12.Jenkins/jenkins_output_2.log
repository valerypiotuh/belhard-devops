Started by user user
Obtained Jenkinsfile2 from git git@github.com:sergkharkin/jenkins-test.git/
[Pipeline] Start of Pipeline
[Pipeline] node
Running on inteliventi in /home/user/jenkins/workspace/12-2.Jenkins-tarea2
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
The recommended git tool is: NONE
using credential f390392b-8ecd-428f-9530-40ff57695c01
Cloning the remote Git repository
Cloning repository git@github.com:sergkharkin/jenkins-test.git/
 > /usr/bin/git init /home/user/jenkins/workspace/12-2.Jenkins-tarea2 # timeout=10
Fetching upstream changes from git@github.com:sergkharkin/jenkins-test.git/
 > /usr/bin/git --version # timeout=10
 > git --version # 'git version 2.34.1'
using GIT_SSH to set credentials 
 > /usr/bin/git fetch --tags --force --progress -- git@github.com:sergkharkin/jenkins-test.git/ +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
Checking out Revision 1f00c9c94fda583f4a770ccad146334b13e6f9bb (refs/remotes/origin/main)
Commit message: "Jenkinsfile2"
 > /usr/bin/git config remote.origin.url git@github.com:sergkharkin/jenkins-test.git/ # timeout=10
 > /usr/bin/git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
 > /usr/bin/git rev-parse refs/remotes/origin/main^{commit} # timeout=10
 > /usr/bin/git config core.sparsecheckout # timeout=10
 > /usr/bin/git checkout -f 1f00c9c94fda583f4a770ccad146334b13e6f9bb # timeout=10
 > /usr/bin/git rev-list --no-walk 1f00c9c94fda583f4a770ccad146334b13e6f9bb # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (run docker)
[Pipeline] node
Running on inteliventi in /home/user/jenkins/workspace/12-2.Jenkins-tarea2@2
[Pipeline] {
[Pipeline] ws
Running in /home/user/jenkins
[Pipeline] {
[Pipeline] checkout
The recommended git tool is: NONE
using credential f390392b-8ecd-428f-9530-40ff57695c01
Fetching changes from the remote Git repository
 > /usr/bin/git rev-parse --resolve-git-dir /home/user/jenkins/.git # timeout=10
 > /usr/bin/git config remote.origin.url git@github.com:sergkharkin/jenkins-test.git/ # timeout=10
Fetching upstream changes from git@github.com:sergkharkin/jenkins-test.git/
 > /usr/bin/git --version # timeout=10
 > git --version # 'git version 2.34.1'
using GIT_SSH to set credentials 
 > /usr/bin/git fetch --tags --force --progress -- git@github.com:sergkharkin/jenkins-test.git/ +refs/heads/*:refs/remotes/origin/* # timeout=10
Checking out Revision 1f00c9c94fda583f4a770ccad146334b13e6f9bb (refs/remotes/origin/main)
Commit message: "Jenkinsfile2"
[Pipeline] withEnv
[Pipeline] {
[Pipeline] isUnix
[Pipeline] readFile
[Pipeline] sh
 > /usr/bin/git rev-parse refs/remotes/origin/main^{commit} # timeout=10
 > /usr/bin/git config core.sparsecheckout # timeout=10
 > /usr/bin/git checkout -f 1f00c9c94fda583f4a770ccad146334b13e6f9bb # timeout=10
+ docker build -t 057275ea6fd93a9d535736720db57109038aa59f -f Dockerfile .
Sending build context to Docker daemon  3.114MB
Step 1/5 : FROM alpine:latest
 ---> e66264b98777
Step 2/5 : RUN mkdir /app
 ---> Using cache
 ---> bef173e49c7a
Step 3/5 : WORKDIR /app
 ---> Using cache
 ---> 37ae2d094f98
Step 4/5 : RUN apk update && apk add curl wget git bash speedtest-cli
 ---> Running in b9b0416e6584
fetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz
v3.16.0-335-gf077f9b235 [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]
v3.16.0-336-g10a80f1c46 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]
OK: 17031 distinct packages available
(1/25) Installing ncurses-terminfo-base (6.3_p20220521-r0)
(2/25) Installing ncurses-libs (6.3_p20220521-r0)
(3/25) Installing readline (8.1.2-r0)
(4/25) Installing bash (5.1.16-r2)
Executing bash-5.1.16-r2.post-install
(5/25) Installing ca-certificates (20211220-r0)
(6/25) Installing brotli-libs (1.0.9-r6)
(7/25) Installing nghttp2-libs (1.47.0-r0)
(8/25) Installing libcurl (7.83.1-r2)
(9/25) Installing curl (7.83.1-r2)
(10/25) Installing expat (2.4.8-r0)
(11/25) Installing pcre2 (10.40-r0)
(12/25) Installing git (2.36.2-r0)
(13/25) Installing libbz2 (1.0.8-r1)
(14/25) Installing libffi (3.4.2-r1)
(15/25) Installing gdbm (1.23-r0)
(16/25) Installing xz-libs (5.2.5-r1)
(17/25) Installing libgcc (11.2.1_git20220219-r2)
(18/25) Installing libstdc++ (11.2.1_git20220219-r2)
(19/25) Installing mpdecimal (2.5.1-r1)
(20/25) Installing sqlite-libs (3.38.5-r0)
(21/25) Installing python3 (3.10.4-r0)
(22/25) Installing speedtest-cli (2.1.3-r2)
(23/25) Installing libunistring (1.0-r0)
(24/25) Installing libidn2 (2.3.2-r2)
(25/25) Installing wget (1.21.3-r0)
Executing busybox-1.35.0-r13.trigger
Executing ca-certificates-20211220-r0.trigger
OK: 75 MiB in 39 packages
Removing intermediate container b9b0416e6584
 ---> 10b0acd22f4a
Step 5/5 : RUN speedtest-cli >> /app/speedtest.log && cat /app/speedtest.log
 ---> Running in dd5c4b4199b2
Retrieving speedtest.net configuration...
Testing from Innovation IT Solutions LTD (146.19.233.207)...
Retrieving speedtest.net server list...
Selecting best server based on ping...
Hosted by Deutsche Telekom (Berlin) [300.79 km]: 14.238 ms
Testing download speed................................................................................
Download: 74.80 Mbit/s
Testing upload speed......................................................................................................
Upload: 84.00 Mbit/s
Removing intermediate container dd5c4b4199b2
 ---> 50ae0b204013
Successfully built 50ae0b204013
Successfully tagged 057275ea6fd93a9d535736720db57109038aa59f:latest
[Pipeline] isUnix
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
+ docker inspect -f . 057275ea6fd93a9d535736720db57109038aa59f
.
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] withDockerContainer
inteliventi does not seem to be running inside a container
$ docker run -t -d -u 1000:1000 -w /home/user/jenkins -v /home/user/jenkins:/home/user/jenkins:rw,z -v /home/user/jenkins@tmp:/home/user/jenkins@tmp:rw,z -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** 057275ea6fd93a9d535736720db57109038aa59f cat
$ docker top 08b27f11f2411ca1911e89209e2a9c58ac7a38d0761475d68c9ca5d3c25dc14c -eo pid,comm
[Pipeline] {
[Pipeline] sh
+ pwd
/home/user/jenkins
[Pipeline] sh
+ ls -la
total 52
drwx------    6 1000     1000          4096 Jul 16 12:19 .
drwxr-xr-x    4 root     root          4096 Jul 16 12:20 ..
drwxrwxr-x    8 1000     1000          4096 Jul 16 12:19 .git
-rw-r--r--    1 1000     1000           238 Jul 16 12:18 Dockerfile
-rw-rw-r--    1 1000     1000           901 Jul 16 12:19 Jenkinsfile
-rw-rw-r--    1 1000     1000           901 Jul 16 12:08 Jenkinsfile.backup
-rw-rw-r--    1 1000     1000           612 Jul 16 12:19 Jenkinsfile2
-rw-rw-r--    1 1000     1000            91 Jul 16 12:08 README.md
drwxrwxr-x    3 1000     1000          4096 Jul 16 12:08 caches
-rwxr-xr-x    1 1000     1000           109 Jul 14 10:00 entrypoint.sh
-rw-rw-r--    1 1000     1000           111 Jul 16 12:08 index.html
drwxrwxr-x    3 1000     1000          4096 Jul 16 12:09 remoting
drwxrwxr-x    5 1000     1000          4096 Jul 16 12:19 workspace
[Pipeline] }
$ docker stop --time=1 08b27f11f2411ca1911e89209e2a9c58ac7a38d0761475d68c9ca5d3c25dc14c
$ docker rm -f 08b27f11f2411ca1911e89209e2a9c58ac7a38d0761475d68c9ca5d3c25dc14c
[Pipeline] // withDockerContainer
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // ws
[Pipeline] }
[Pipeline] // node
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (список контейнеров)
[Pipeline] node
Running on inteliventi in /home/user/jenkins/workspace/12-2.Jenkins-tarea2@2
[Pipeline] {
[Pipeline] checkout
The recommended git tool is: NONE
using credential f390392b-8ecd-428f-9530-40ff57695c01
Cloning the remote Git repository
Cloning repository git@github.com:sergkharkin/jenkins-test.git/
 > /usr/bin/git init /home/user/jenkins/workspace/12-2.Jenkins-tarea2@2 # timeout=10
Fetching upstream changes from git@github.com:sergkharkin/jenkins-test.git/
 > /usr/bin/git --version # timeout=10
 > git --version # 'git version 2.34.1'
using GIT_SSH to set credentials 
 > /usr/bin/git fetch --tags --force --progress -- git@github.com:sergkharkin/jenkins-test.git/ +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
Checking out Revision 1f00c9c94fda583f4a770ccad146334b13e6f9bb (refs/remotes/origin/main)
Commit message: "Jenkinsfile2"
[Pipeline] withEnv
[Pipeline] {
[Pipeline] sh
 > /usr/bin/git config remote.origin.url git@github.com:sergkharkin/jenkins-test.git/ # timeout=10
 > /usr/bin/git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
 > /usr/bin/git rev-parse refs/remotes/origin/main^{commit} # timeout=10
 > /usr/bin/git config core.sparsecheckout # timeout=10
 > /usr/bin/git checkout -f 1f00c9c94fda583f4a770ccad146334b13e6f9bb # timeout=10
+ docker ps -a
CONTAINER ID   IMAGE                   COMMAND                CREATED          STATUS                      PORTS     NAMES
38a9f179c9dc   sergkharkin/speedtest   "/entrypoint.sh cat"   13 minutes ago   Exited (1) 13 minutes ago             silly_bell
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] cleanWs
[WS-CLEANUP] Deleting project workspace...
[WS-CLEANUP] Deferred wipeout is used...
[WS-CLEANUP] done
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
